<!doctype html>
<html lang="en">
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cryptobavaro HUD</title>
<style>
body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:20px;line-height:1.35}
.card{max-width:920px;margin:auto;border:1px solid #eee;border-radius:12px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,.05)}
.h{font-size:18px;margin:18px 0 8px}
pre{white-space:pre-wrap;background:#fafafa;border:1px solid #f0f0f0;border-radius:8px;padding:14px}
.badge{display:inline-block;padding:4px 8px;border-radius:6px;background:#eef}
.row{display:flex;gap:8px;align-items:center}
button{padding:8px 12px;border:1px solid #ccc;border-radius:8px;background:#fff;cursor:pointer}
</style>
<div class="card">
  <div class="row">
    <button id="refresh">Обновить</button>
    <div id="ts" class="badge">—</div>
  </div>
  <h2>Анализ BTCUSDT (5m)</h2>
  <div id="content"><em>Загрузка…</em></div>
</div>
<script>
async function load(){
  const r = await fetch('/api/hud_api.php?cmd=latest&sym=BTCUSDT&tf=5');
  const j = await r.json();
  const c = document.getElementById('content');
  if(!j.ok || !j.data){ c.innerHTML = '<b>Нет данных</b>'; return; }
  const d = j.data;
  const dt = new Date(parseInt(d.ts)).toLocaleString();
  document.getElementById('ts').textContent = dt+' UTC';
  c.innerHTML = `<pre>${d.summary_md}</pre>`;
}
document.getElementById('refresh').onclick = load;
load();
</script>
</html>
